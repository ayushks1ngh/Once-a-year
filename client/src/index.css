@import "tailwindcss";

@custom-variant dark (&:is(.dark *));

@theme inline {
  --radius-sm: calc(var(--radius) - 4px);
  --radius-md: calc(var(--radius) - 2px);
  --radius-lg: var(--radius);
  --radius-xl: calc(var(--radius) + 4px);

  --color-background: hsl(var(--background));
  --color-foreground: hsl(var(--foreground));
  --color-card: hsl(var(--card));
  --color-card-foreground: hsl(var(--card-foreground));
  --color-popover: hsl(var(--popover));
  --color-popover-foreground: hsl(var(--popover-foreground));
  --color-primary: hsl(var(--primary));
  --color-primary-foreground: hsl(var(--primary-foreground));
  --color-secondary: hsl(var(--secondary));
  --color-secondary-foreground: hsl(var(--secondary-foreground));
  --color-muted: hsl(var(--muted));
  --color-muted-foreground: hsl(var(--muted-foreground));
  --color-accent: hsl(var(--accent));
  --color-accent-foreground: hsl(var(--accent-foreground));
  --color-destructive: hsl(var(--destructive));
  --color-destructive-foreground: hsl(var(--destructive-foreground));
  --color-border: hsl(var(--border));
  --color-primary-border: hsl(var(--primary-border));
  --color-accent-border: hsl(var(--accent-border));
  --color-card-border: hsl(var(--card-border));
  --color-input: hsl(var(--input));
  --color-ring: hsl(var(--ring));

  --font-sans: "DM Sans", ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, "Apple Color Emoji",
    "Segoe UI Emoji";
  --font-display: "Gochi Hand", ui-serif, Georgia, serif;
}

:root {
  --background: 330 60% 98%;
  --foreground: 238 28% 18%;

  --card: 0 0% 100%;
  --card-foreground: 238 28% 18%;

  --popover: 0 0% 100%;
  --popover-foreground: 238 28% 18%;

  --primary: 332 85% 58%;
  --primary-foreground: 0 0% 100%;

  --secondary: 200 90% 92%;
  --secondary-foreground: 238 28% 18%;

  --muted: 220 20% 96%;
  --muted-foreground: 238 10% 45%;

  --accent: 276 88% 92%;
  --accent-foreground: 238 28% 18%;

  --destructive: 0 80% 58%;
  --destructive-foreground: 0 0% 100%;

  --border: 240 14% 86%;
  --primary-border: 332 75% 49%;
  --accent-border: 276 35% 75%;
  --card-border: 240 14% 86%;

  --input: 240 16% 86%;
  --ring: 332 85% 58%;

  --radius: 1.25rem;
}

@layer base {
  * {
    @apply border-border;
  }

  html,
  body {
    height: 100%;
  }

  body {
    @apply font-sans antialiased bg-background text-foreground;
    overflow: hidden;
  }
}

@layer utilities {
  .text-display {
    font-family: var(--font-display);
  }

  .noise::before {
    content: "";
    position: absolute;
    inset: -30%;
    background-image:
      url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='220' height='220'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.9' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='220' height='220' filter='url(%23n)' opacity='.18'/%3E%3C/svg%3E");
    background-size: 220px 220px;
    opacity: 0.25;
    mix-blend-mode: soft-light;
    pointer-events: none;
    transform: rotate(-3deg);
  }

  .glow {
    box-shadow:
      0 10px 30px hsl(332 85% 58% / 0.18),
      0 2px 10px hsl(276 88% 72% / 0.12);
  }

  .soft-border {
    border: 1px solid hsl(var(--border) / 0.7);
  }

  .glass {
    background: hsl(0 0% 100% / 0.62);
    backdrop-filter: blur(14px);
  }

  @keyframes gradientShift {
    0% {
      transform: translate3d(-2%, -2%, 0) scale(1.02);
      filter: saturate(1.15);
    }
    50% {
      transform: translate3d(2%, 2%, 0) scale(1.04);
      filter: saturate(1.28);
    }
    100% {
      transform: translate3d(-2%, -2%, 0) scale(1.02);
      filter: saturate(1.15);
    }
  }

  @keyframes floatUp {
    0% {
      transform: translate3d(0, 18px, 0) scale(0.98);
      opacity: 0;
    }
    15% {
      opacity: 0.9;
    }
    100% {
      transform: translate3d(0, -24px, 0) scale(1.02);
      opacity: 0;
    }
  }

  @keyframes sway {
    0% {
      transform: translateX(-10px) rotate(-2deg);
    }
    50% {
      transform: translateX(10px) rotate(2deg);
    }
    100% {
      transform: translateX(-10px) rotate(-2deg);
    }
  }

  @keyframes pulseHeart {
    0% {
      transform: scale(1);
    }
    40% {
      transform: scale(1.04);
    }
    100% {
      transform: scale(1);
    }
  }

  .bg-dream {
    position: fixed;
    inset: 0;
    overflow: hidden;
    z-index: -1;
  }

  .bg-dream::before {
    content: "";
    position: absolute;
    inset: -30%;
    background:
      radial-gradient(1200px 800px at 18% 20%, var(--tint-1) 0%, transparent 60%),
      radial-gradient(900px 600px at 82% 30%, var(--tint-2) 0%, transparent 62%),
      radial-gradient(1000px 700px at 50% 90%, var(--tint-3) 0%, transparent 60%),
      linear-gradient(135deg, hsl(var(--background)), hsl(var(--background)));
    animation: gradientShift 12s ease-in-out infinite;
  }

  .float-layer {
    position: absolute;
    inset: 0;
    pointer-events: none;
  }

  .float {
    position: absolute;
    left: calc(var(--x) * 1%);
    bottom: -30px;
    width: calc(var(--size) * 1px);
    height: calc(var(--size) * 1px);
    opacity: var(--o);
    animation:
      floatUp calc(var(--dur) * 1s) linear infinite,
      sway calc(var(--sway) * 1s) ease-in-out infinite;
    filter: blur(0.1px);
  }

  .float.heart {
    background: radial-gradient(circle at 30% 30%, rgba(255, 255, 255, 0.9), rgba(255, 255, 255, 0) 35%),
      linear-gradient(135deg, var(--float-a), var(--float-b));
    clip-path: path(
      "M12 21 C10 19,4 14,4 9 C4 6,6 4,8.8 4 C10.3 4,11.5 4.7,12 5.4 C12.5 4.7,13.7 4,15.2 4 C18 4,20 6,20 9 C20 14,14 19,12 21 Z"
    );
    transform-origin: center;
  }

  .float.petal {
    background: radial-gradient(circle at 30% 30%, rgba(255, 255, 255, 0.75), rgba(255, 255, 255, 0) 45%),
      linear-gradient(135deg, var(--float-a), var(--float-b));
    border-radius: 999px 999px 999px 0;
    transform: rotate(35deg);
  }

  .day-card {
    position: relative;
    border-radius: calc(var(--radius) + 0.75rem);
  }

  .day-card::after {
    content: "";
    position: absolute;
    inset: -1px;
    border-radius: inherit;
    background: linear-gradient(135deg, hsl(var(--ring) / 0.45), rgba(255, 255, 255, 0));
    opacity: 0.9;
    pointer-events: none;
    mask: linear-gradient(#000, #000) content-box, linear-gradient(#000, #000);
    -webkit-mask: linear-gradient(#000, #000) content-box, linear-gradient(#000, #000);
    padding: 1px;
    -webkit-mask-composite: xor;
    mask-composite: exclude;
  }

  .locked {
    filter: blur(6px) saturate(0.92);
    opacity: 0.72;
  }

  .badge-chip {
    background: linear-gradient(135deg, hsl(var(--primary) / 0.22), hsl(var(--accent) / 0.18));
    border: 1px solid hsl(var(--border) / 0.6);
  }

  .hero-heart {
    animation: pulseHeart 3.5s ease-in-out infinite;
  }

  /* Rose Day Visuals */
  @keyframes roseGlow {
    0%, 100% { opacity: 0.4; filter: blur(20px); transform: scale(1); }
    50% { opacity: 0.7; filter: blur(35px); transform: scale(1.1); }
  }

  @keyframes petalFall {
    0% { transform: translate(0, -10%) rotate(0deg); opacity: 0; }
    10% { opacity: 0.8; }
    90% { opacity: 0.8; }
    100% { transform: translate(15vw, 110vh) rotate(360deg); opacity: 0; }
  }

  @keyframes floatingQuote {
    0%, 100% { transform: translateY(0) translateX(0); }
    33% { transform: translateY(-10px) translateX(5px); }
    66% { transform: translateY(5px) translateX(-5px); }
  }

  /* Propose Day Hero Animations */
  @keyframes proposeHeartbeat {
    0%, 100% {
      transform: scale(1);
    }
    25% {
      transform: scale(1.02);
    }
    50% {
      transform: scale(1.05);
    }
    75% {
      transform: scale(1.02);
    }
  }

  @keyframes proposeDustFloat {
    0% {
      opacity: 0;
      transform: translateY(0) translateX(0);
    }
    10% {
      opacity: 0.2;
    }
    90% {
      opacity: 0.1;
    }
    100% {
      opacity: 0;
      transform: translateY(-100vh) translateX(15px);
    }
  }

  .rose-day-bg {
    background: radial-gradient(circle at 50% 50%, #fff5f5 0%, #ffe3e3 100%);
    position: fixed;
    inset: 0;
    z-index: -1;
  }

  .rose-petal {
    position: absolute;
    background: linear-gradient(135deg, #fce4ec, #f8bbd0);
    border-radius: 100% 0 100% 100%;
    opacity: 0;
    pointer-events: none;
    z-index: 0;
  }

  .floating-quote-wrapper {
    animation: floatingQuote 20s ease-in-out infinite;
  }
}
