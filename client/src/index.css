@import "tailwindcss";

@custom-variant dark (&:is(.dark *));

@theme inline {
  --radius-sm: calc(var(--radius) - 4px);
  --radius-md: calc(var(--radius) - 2px);
  --radius-lg: var(--radius);
  --radius-xl: calc(var(--radius) + 4px);

  --color-background: hsl(var(--background));
  --color-foreground: hsl(var(--foreground));
  --color-card: hsl(var(--card));
  --color-card-foreground: hsl(var(--card-foreground));
  --color-popover: hsl(var(--popover));
  --color-popover-foreground: hsl(var(--popover-foreground));
  --color-primary: hsl(var(--primary));
  --color-primary-foreground: hsl(var(--primary-foreground));
  --color-secondary: hsl(var(--secondary));
  --color-secondary-foreground: hsl(var(--secondary-foreground));
  --color-muted: hsl(var(--muted));
  --color-muted-foreground: hsl(var(--muted-foreground));
  --color-accent: hsl(var(--accent));
  --color-accent-foreground: hsl(var(--accent-foreground));
  --color-destructive: hsl(var(--destructive));
  --color-destructive-foreground: hsl(var(--destructive-foreground));
  --color-border: hsl(var(--border));
  --color-primary-border: hsl(var(--primary-border));
  --color-accent-border: hsl(var(--accent-border));
  --color-card-border: hsl(var(--card-border));
  --color-input: hsl(var(--input));
  --color-ring: hsl(var(--ring));

  --font-sans: "DM Sans", ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, "Apple Color Emoji",
    "Segoe UI Emoji";
  --font-display: "Gochi Hand", ui-serif, Georgia, serif;
}

:root {
  --background: 330 60% 98%;
  --foreground: 238 28% 18%;

  --card: 0 0% 100%;
  --card-foreground: 238 28% 18%;

  --popover: 0 0% 100%;
  --popover-foreground: 238 28% 18%;

  --primary: 332 85% 58%;
  --primary-foreground: 0 0% 100%;

  --secondary: 200 90% 92%;
  --secondary-foreground: 238 28% 18%;

  --muted: 220 20% 96%;
  --muted-foreground: 238 10% 45%;

  --accent: 276 88% 92%;
  --accent-foreground: 238 28% 18%;

  --destructive: 0 80% 58%;
  --destructive-foreground: 0 0% 100%;

  --border: 240 14% 86%;
  --primary-border: 332 75% 49%;
  --accent-border: 276 35% 75%;
  --card-border: 240 14% 86%;

  --input: 240 16% 86%;
  --ring: 332 85% 58%;

  --radius: 1.25rem;
}

@layer base {
  * {
    @apply border-border;
  }

  html,
  body {
    height: 100%;
  }

  body {
    @apply font-sans antialiased bg-background text-foreground;
    overflow: hidden;
  }
}

@layer utilities {
  .text-display {
    font-family: var(--font-display);
  }

  .noise::before {
    content: "";
    position: absolute;
    inset: -30%;
    background-image:
      url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='220' height='220'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.9' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='220' height='220' filter='url(%23n)' opacity='.18'/%3E%3C/svg%3E");
    background-size: 220px 220px;
    opacity: 0.25;
    mix-blend-mode: soft-light;
    pointer-events: none;
    transform: rotate(-3deg);
  }

  .glow {
    box-shadow:
      0 10px 30px hsl(332 85% 58% / 0.18),
      0 2px 10px hsl(276 88% 72% / 0.12);
  }

  .soft-border {
    border: 1px solid hsl(var(--border) / 0.7);
  }

  .glass {
    background: hsl(0 0% 100% / 0.62);
    backdrop-filter: blur(14px);
  }

  @keyframes gradientShift {
    0% {
      transform: translate3d(-2%, -2%, 0) scale(1.02);
      filter: saturate(1.15);
    }
    50% {
      transform: translate3d(2%, 2%, 0) scale(1.04);
      filter: saturate(1.28);
    }
    100% {
      transform: translate3d(-2%, -2%, 0) scale(1.02);
      filter: saturate(1.15);
    }
  }

  @keyframes floatUp {
    0% {
      transform: translate3d(0, 18px, 0) scale(0.98);
      opacity: 0;
    }
    15% {
      opacity: 0.9;
    }
    100% {
      transform: translate3d(0, -24px, 0) scale(1.02);
      opacity: 0;
    }
  }

  @keyframes sway {
    0% {
      transform: translateX(-10px) rotate(-2deg);
    }
    50% {
      transform: translateX(10px) rotate(2deg);
    }
    100% {
      transform: translateX(-10px) rotate(-2deg);
    }
  }

  @keyframes pulseHeart {
    0% {
      transform: scale(1);
    }
    40% {
      transform: scale(1.04);
    }
    100% {
      transform: scale(1);
    }
  }

  .bg-dream {
    position: fixed;
    inset: 0;
    overflow: hidden;
    z-index: -1;
  }

  .bg-dream::before {
    content: "";
    position: absolute;
    inset: -30%;
    background:
      radial-gradient(1200px 800px at 18% 20%, var(--tint-1) 0%, transparent 60%),
      radial-gradient(900px 600px at 82% 30%, var(--tint-2) 0%, transparent 62%),
      radial-gradient(1000px 700px at 50% 90%, var(--tint-3) 0%, transparent 60%),
      linear-gradient(135deg, hsl(var(--background)), hsl(var(--background)));
    animation: gradientShift 12s ease-in-out infinite;
  }

  .float-layer {
    position: absolute;
    inset: 0;
    pointer-events: none;
  }

  .float {
    position: absolute;
    left: calc(var(--x) * 1%);
    bottom: -30px;
    width: calc(var(--size) * 1px);
    height: calc(var(--size) * 1px);
    opacity: var(--o);
    animation:
      floatUp calc(var(--dur) * 1s) linear infinite,
      sway calc(var(--sway) * 1s) ease-in-out infinite;
    filter: blur(0.1px);
  }

  .float.heart {
    background: radial-gradient(circle at 30% 30%, rgba(255, 255, 255, 0.9), rgba(255, 255, 255, 0) 35%),
      linear-gradient(135deg, var(--float-a), var(--float-b));
    clip-path: path(
      "M12 21 C10 19,4 14,4 9 C4 6,6 4,8.8 4 C10.3 4,11.5 4.7,12 5.4 C12.5 4.7,13.7 4,15.2 4 C18 4,20 6,20 9 C20 14,14 19,12 21 Z"
    );
    transform-origin: center;
  }

  .float.petal {
    background: radial-gradient(circle at 30% 30%, rgba(255, 255, 255, 0.75), rgba(255, 255, 255, 0) 45%),
      linear-gradient(135deg, var(--float-a), var(--float-b));
    border-radius: 999px 999px 999px 0;
    transform: rotate(35deg);
  }

  .day-card {
    position: relative;
    border-radius: calc(var(--radius) + 0.75rem);
  }

  .day-card::after {
    content: "";
    position: absolute;
    inset: -1px;
    border-radius: inherit;
    background: linear-gradient(135deg, hsl(var(--ring) / 0.45), rgba(255, 255, 255, 0));
    opacity: 0.9;
    pointer-events: none;
    mask: linear-gradient(#000, #000) content-box, linear-gradient(#000, #000);
    -webkit-mask: linear-gradient(#000, #000) content-box, linear-gradient(#000, #000);
    padding: 1px;
    -webkit-mask-composite: xor;
    mask-composite: exclude;
  }

  .locked {
    filter: blur(6px) saturate(0.92);
    opacity: 0.72;
  }

  .badge-chip {
    background: linear-gradient(135deg, hsl(var(--primary) / 0.22), hsl(var(--accent) / 0.18));
    border: 1px solid hsl(var(--border) / 0.6);
  }

  .hero-heart {
    animation: pulseHeart 3.5s ease-in-out infinite;
  }

  /* Rose Day Visuals */
  @keyframes roseGlow {
    0%, 100% { opacity: 0.4; filter: blur(20px); transform: scale(1); }
    50% { opacity: 0.7; filter: blur(35px); transform: scale(1.1); }
  }

  @keyframes petalFall {
    0% { transform: translate(0, -10%) rotate(0deg); opacity: 0; }
    10% { opacity: 0.8; }
    90% { opacity: 0.8; }
    100% { transform: translate(15vw, 110vh) rotate(360deg); opacity: 0; }
  }

  @keyframes floatingQuote {
    0%, 100% { transform: translateY(0) translateX(0); }
    33% { transform: translateY(-10px) translateX(5px); }
    66% { transform: translateY(5px) translateX(-5px); }
  }

  .rose-day-bg {
    background: radial-gradient(circle at 50% 50%, #fff5f5 0%, #ffe3e3 100%);
    position: fixed;
    inset: 0;
    z-index: -1;
  }

  .rose-petal {
    position: absolute;
    background: linear-gradient(135deg, #fce4ec, #f8bbd0);
    border-radius: 100% 0 100% 100%;
    opacity: 0;
    pointer-events: none;
    z-index: 0;
  }

  .floating-quote-wrapper {
    animation: floatingQuote 20s ease-in-out infinite;
  }

  /* Rose Day Dark Theme */
  @keyframes fogDrift {
    0% {
      transform: translate(0, 0) scale(1);
      opacity: 0.15;
    }
    50% {
      transform: translate(-15px, 10px) scale(1.05);
      opacity: 0.25;
    }
    100% {
      transform: translate(0, 0) scale(1);
      opacity: 0.15;
    }
  }

  @keyframes fogDriftSlow {
    0% {
      transform: translate(0, 0) scale(1);
      opacity: 0.08;
    }
    50% {
      transform: translate(20px, -15px) scale(1.08);
      opacity: 0.15;
    }
    100% {
      transform: translate(0, 0) scale(1);
      opacity: 0.08;
    }
  }

  .rose-day-dark {
    background: #0b0b0f !important;
  }

  .rose-day-card-dark {
    background: linear-gradient(145deg, #1a1a24, #2c1f32) !important;
    backdrop-filter: blur(20px) !important;
    border: 1px solid rgba(255, 255, 255, 0.08) !important;
    box-shadow:
      0 8px 32px rgba(0, 0, 0, 0.3),
      0 0 60px rgba(236, 72, 153, 0.06);
  }

  .rose-day-card-dark::after {
    background: linear-gradient(135deg, rgba(236, 72, 153, 0.1), rgba(255, 255, 255, 0)) !important;
    opacity: 0.6 !important;
  }

  .rose-day-text-primary {
    color: #f4f4f6 !important;
  }

  .rose-day-text-secondary {
    color: rgba(255, 255, 255, 0.65) !important;
  }

  .rose-day-text-muted {
    color: rgba(255, 255, 255, 0.45) !important;
  }

  /* Rose Glow (deprecated, kept for compatibility) */
  .rose-glow {
    position: absolute;
    inset: 0;
    z-index: 0;
    pointer-events: none;
  }

  .rose-glow::before {
    content: "";
    position: absolute;
    inset: -30%;
    background: radial-gradient(circle at 50% 50%, rgba(236, 72, 153, 0.2) 0%, transparent 70%);
    filter: blur(40px);
    animation: fogDrift 8s ease-in-out infinite;
  }

  .rose-glow::after {
    content: "";
    position: absolute;
    inset: -40%;
    background: radial-gradient(ellipse 600px 400px at 50% 40%, rgba(236, 72, 153, 0.08) 0%, transparent 65%);
    filter: blur(60px);
    animation: fogDrift 12s ease-in-out infinite reverse;
  }

  /* Rose Hero - Cinematic Layered Section */
  .rose-hero-container {
    position: relative;
    background: linear-gradient(145deg, #1a1a24, #2c1f32);
    border-radius: 2rem;
    overflow: hidden;
    display: flex;
    align-items: flex-end;
    justify-content: center;
  }

  /* Layer A: Radial Pink Glow */
  .rose-glow-layer {
    position: absolute;
    inset: 0;
    background: radial-gradient(
      circle 350px at 50% 60%,
      rgba(236, 72, 153, 0.3) 0%,
      rgba(236, 72, 153, 0.15) 30%,
      transparent 70%
    );
    filter: blur(60px);
    pointer-events: none;
    z-index: 1;
  }

  /* Layer B: Fog Layers */
  .rose-fog-layer {
    position: absolute;
    inset: -10%;
    pointer-events: none;
    z-index: 2;
  }

  .rose-fog-inner {
    background: radial-gradient(
      ellipse 500px 400px at 50% 45%,
      rgba(236, 72, 153, 0.12) 0%,
      rgba(200, 100, 150, 0.05) 40%,
      transparent 70%
    );
    filter: blur(50px);
    animation: fogDriftSlow 25s ease-in-out infinite;
  }

  .rose-fog-outer {
    background: radial-gradient(
      ellipse 600px 350px at 50% 55%,
      rgba(220, 80, 140, 0.08) 0%,
      transparent 60%
    );
    filter: blur(80px);
    animation: fogDriftSlow 35s ease-in-out infinite reverse;
  }

  /* Layer C: Rose Visual */
  .rose-visual-layer {
    position: absolute;
    inset: 0;
    display: flex;
    align-items: flex-end;
    justify-content: center;
    padding-bottom: 2rem;
    z-index: 3;
    pointer-events: auto;
  }

  /* Layer D: Bloom Overlay */
  .rose-bloom-layer {
    position: absolute;
    inset: 0;
    background: linear-gradient(
      to bottom,
      rgba(255, 255, 255, 0.08) 0%,
      rgba(255, 255, 255, 0.02) 50%,
      rgba(0, 0, 0, 0.1) 100%
    );
    pointer-events: none;
    z-index: 4;
  }

  /* Global Dark Theme - Premium */
  .dark-bg-premium {
    background: radial-gradient(
      circle at 30% 20%,
      #2a1f32,
      #0f0f16 70%
    );
  }

  .dark-container {
    background: rgba(25, 25, 35, 0.8);
    backdrop-filter: blur(16px);
    border: 1px solid rgba(255, 255, 255, 0.05);
    box-shadow: 0 20px 60px rgba(0, 0, 0, 0.6);
  }

  .dark-container-hover {
    transition: all 0.3s cubic-bezier(0.23, 1, 0.32, 1);
  }

  .dark-container-hover:hover {
    background: rgba(35, 35, 50, 0.9);
    transform: translateY(-2px);
    box-shadow: 0 25px 80px rgba(0, 0, 0, 0.7),
                0 0 40px rgba(236, 72, 153, 0.1);
    border-color: rgba(236, 72, 153, 0.15);
  }

  /* Dark Theme Text Colors */
  .text-dark-primary {
    color: #f4f4f6;
  }

  .text-dark-secondary {
    color: rgba(255, 255, 255, 0.6);
  }

  .text-dark-muted {
    color: rgba(255, 255, 255, 0.4);
  }

  /* Day Cards - Dark Theme */
  .day-card-dark {
    background: rgba(30, 25, 40, 0.7);
    backdrop-filter: blur(12px);
    border: 1px solid rgba(255, 255, 255, 0.08);
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
    transition: all 0.3s cubic-bezier(0.23, 1, 0.32, 1);
  }

  .day-card-dark:hover {
    background: rgba(45, 35, 55, 0.85);
    transform: translateY(-4px) scale(1.02);
    border-color: rgba(236, 72, 153, 0.2);
    box-shadow:
      0 12px 48px rgba(0, 0, 0, 0.5),
      0 0 30px rgba(236, 72, 153, 0.15);
  }

  .day-card-dark:active {
    transform: translateY(-2px) scale(1.01);
  }

  /* Header Badge Dark */
  .badge-chip-dark {
    background: rgba(236, 72, 153, 0.1);
    border: 1px solid rgba(236, 72, 153, 0.2);
  }

  /* Footer Dark */
  .footer-dark {
    color: rgba(255, 255, 255, 0.35);
  }

  /* Back Button Dark */
  .back-button-dark {
    color: rgba(255, 255, 255, 0.5);
    transition: color 0.3s ease;
  }

  .back-button-dark:hover {
    color: rgba(255, 255, 255, 0.85);
  }

  /* Final Note Card Dark (Day 7) */
  .final-note-dark {
    background: linear-gradient(135deg, rgba(236, 72, 153, 0.1), rgba(200, 100, 150, 0.05));
    border: 1px solid rgba(236, 72, 153, 0.15);
  }
}
